<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The most suitable wallet for Internet users, safe and efficient.">
    <meta name="keywords" content="Web3, Wallet, Cryptocurrency, Safe, Efficient">
    <meta name="author" content="@iYashKun">
    <title>Web3 Wallet: Testnet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.2/dist/ethers.umd.min.js"></script>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://unpkg.com/bs58@5.0.0/dist/index.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@scure/bip39@1.2.1/index.js"></script>
    <script src="https://unpkg.com/bitcoinjs-lib@6.1.6/dist/bitcoinjs-lib.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(145deg, #000000, #1a1a1a);
            user-select: none;
        }
        img, button {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-in {
            animation: slideIn 0.4s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .modal-enter {
            animation: modalEnter 0.3s ease-out;
        }
        @keyframes modalEnter {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .wallet-item {
            animation: fadeInItem 0.6s ease-in forwards;
            opacity: 0;
            transform: translateY(10px);
        }
        .wallet-item:nth-child(1) { animation-delay: 0.1s; }
        .wallet-item:nth-child(2) { animation-delay: 0.2s; }
        .wallet-item:nth-child(3) { animation-delay: 0.3s; }
        .wallet-item:nth-child(4) { animation-delay: 0.4s; }
        .wallet-item:nth-child(5) { animation-delay: 0.5s; }
        @keyframes fadeInItem {
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-black min-h-screen">
    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg hidden z-50 transform translate-x-full transition-transform duration-300">
        <span class="text-sm font-medium"></span>
    </div>

    <div id="mainPage" class="text-left p-4 sm:p-6 w-full max-w-sm sm:max-w-md mx-auto">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl sm:text-3xl text-white font-bold">Web3 Wallet</h1>
            <button id="settingsBtn" class="text-white text-xl sm:text-2xl"><i class="fas fa-cog"></i></button>
        </div>
        <img alt="Illustration of a shield with a check mark, a wallet, and coins" class="mx-auto mb-6 w-32 h-32 sm:w-48 sm:h-48 object-contain" src="https://framerusercontent.com/images/4yWuZhYgrbEf24mM1QSmRoMsbiI.png?scale-down-to=512"/>
        <p class="text-gray-400 mb-6 text-sm leading-relaxed">The most suitable wallet for Internet users, safe and efficient</p>
        <div class="mb-4">
            <label class="block text-gray-400 text-xs font-medium mb-2 uppercase tracking-wide">Select Chain</label>
            <div class="flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-1">
                <button id="evmChain" class="py-2 px-3 sm:px-2 bg-indigo-600 text-white rounded text-xs font-semibold transition-colors duration-200">EVM</button>
                <button id="solanaChain" class="py-2 px-3 sm:px-2 bg-gray-800 text-gray-300 rounded text-xs font-semibold transition-colors duration-200">SOL</button>
                <button id="bitcoinChain" class="py-2 px-3 sm:px-2 bg-gray-800 text-gray-300 rounded text-xs font-semibold transition-colors duration-200">BTC</button>
            </div>
        </div>
        <button id="createWallet" class="bg-white text-black py-3 px-6 rounded-full w-full font-semibold text-sm transition-colors duration-200">Create Wallet</button>
        <button id="bulkCreate" class="bg-indigo-600 text-white py-3 px-6 rounded-full w-full font-semibold text-sm transition-colors duration-200 mt-3">Bulk Create</button>
    </div>

    <div id="walletPage" class="hidden text-left p-4 sm:p-6 w-full max-w-sm sm:max-w-md mx-auto fade-in">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl sm:text-3xl text-white font-bold">Your Wallet</h1>
            <button id="backBtn" class="text-white text-xl sm:text-2xl"><i class="fas fa-arrow-left"></i></button>
        </div>
        <div id="singleWalletContent" class="bg-gray-900 p-4 sm:p-6 rounded-xl mb-6 border border-gray-800">
            <!-- Dynamically populated for single wallet -->
        </div>
        <button id="returnBtn" class="bg-white text-black py-3 px-6 rounded-full w-full font-semibold text-sm transition-colors duration-200">Back to Home</button>
    </div>

    <!-- Bulk Results Page -->
    <div id="bulkPage" class="hidden text-left p-4 sm:p-6 w-full max-w-sm sm:max-w-md mx-auto fade-in min-h-screen">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl sm:text-3xl text-white font-bold">Bulk Wallets</h1>
            <button id="bulkBackBtn" class="text-white text-xl sm:text-2xl"><i class="fas fa-arrow-left"></i></button>
        </div>
        <div id="bulkContent" class="bg-gray-900 p-4 rounded-xl mb-6 border border-gray-800 max-h-64 sm:max-h-96 overflow-y-auto space-y-4">
            <!-- Dynamically populated -->
        </div>
        <button id="bulkReturnBtn" class="bg-white text-black py-3 px-6 rounded-full w-full font-semibold text-sm transition-colors duration-200">Back to Home</button>
    </div>

    <!-- Bulk Modal Overlay -->
    <div id="bulkModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-40 p-4">
        <div id="bulkModalContent" class="bg-gray-900 rounded-xl shadow-2xl w-full max-w-sm sm:max-w-md modal-enter border border-gray-700">
            <div class="flex justify-between items-center border-b border-gray-700 px-4 sm:px-5 py-4">
                <h2 class="text-sm font-semibold text-gray-300 uppercase tracking-wide">Bulk Create</h2>
                <button id="closeBulkModal" class="text-gray-400 text-lg transition-colors duration-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="walletForm" class="px-4 sm:px-5 py-5 space-y-5 text-xs text-gray-300 font-medium" onsubmit="return false;">
                <div>
                    <label for="chain" class="block mb-1 font-semibold text-gray-400 uppercase tracking-wide text-[10px]">Chain</label>
                    <div class="flex flex-col sm:flex-row border border-gray-600 rounded bg-gray-800">
                        <button type="button" id="bulkEvm" class="flex-1 py-1.5 px-2 text-xs bg-indigo-600 text-white font-semibold transition-colors duration-200">EVM</button>
                        <button type="button" id="bulkSolana" class="flex-1 py-1.5 px-2 text-xs bg-gray-800 text-gray-500 font-semibold transition-colors duration-200">SOL</button>
                        <button type="button" id="bulkBitcoin" class="flex-1 py-1.5 px-2 text-xs bg-gray-800 text-gray-500 font-semibold transition-colors duration-200">BTC</button>
                    </div>
                </div>
                <div>
                    <label for="count" class="block mb-1 font-semibold text-gray-400 uppercase tracking-wide text-[10px]">Count</label>
                    <div class="flex items-center border border-gray-600 rounded text-gray-300 text-xs font-semibold bg-gray-800">
                        <button type="button" id="decrement" class="flex-1 py-2 border-r border-gray-600 text-lg font-bold">âˆ’</button>
                        <input
                            id="count"
                            type="number"
                            min="1"
                            max="2000"
                            value="1"
                            class="flex-1 text-center py-2 focus:outline-none border-r border-gray-600 bg-transparent text-white"
                        />
                        <button type="button" id="increment" class="flex-1 py-2 border-r border-gray-600 text-lg font-bold">+</button>
                        <button type="button" id="maxBtn" class="flex-1 py-2 border-r border-gray-600 text-xs font-semibold text-gray-300">MAX</button>
                        <button type="button" id="resetBtn" class="flex-1 py-2 text-xs font-semibold text-gray-300 border-l border-gray-600">RESET</button>
                    </div>
                </div>
                <div class="relative">
                    <label for="typeSelect" class="block mb-1 font-semibold text-gray-400 uppercase tracking-wide text-[10px]">Type</label>
                    <button
                        type="button"
                        id="typeSelect"
                        aria-haspopup="listbox"
                        aria-expanded="false"
                        class="w-full flex items-center justify-between border border-gray-600 rounded px-3 py-2 text-xs font-semibold text-gray-300 bg-gray-800"
                    >
                        <div class="flex items-center space-x-2">
                            <span id="typeColor" class="w-3 h-3 rounded-sm bg-teal-500 block"></span>
                            <span id="typeText" class="uppercase">Secret Phases</span>
                        </div>
                        <i class="fas fa-chevron-down text-gray-500"></i>
                    </button>
                    <ul
                        id="typeOptions"
                        class="hidden absolute z-20 mt-1 w-full max-h-32 overflow-auto border border-gray-600 rounded bg-gray-800 text-xs text-gray-300 font-semibold shadow-lg"
                        role="listbox"
                        tabindex="-1"
                    >
                        <li
                            class="cursor-pointer px-3 py-2 transition-colors duration-200 flex items-center space-x-2"
                            data-value="Secret Phases"
                            data-color="bg-teal-500"
                            role="option"
                            tabindex="0"
                        >
                            <span class="w-3 h-3 rounded-sm bg-teal-500 block"></span>
                            <span class="uppercase">Secret Phases</span>
                        </li>
                        <li>
                            <hr class="border-gray-600 my-1" />
                        </li>
                        <li
                            class="cursor-pointer px-3 py-2 transition-colors duration-200 flex items-center space-x-2"
                            data-value="Private Key"
                            data-color="bg-red-500"
                            role="option"
                            tabindex="0"
                        >
                            <span class="w-3 h-3 rounded-sm bg-red-500 block"></span>
                            <span class="uppercase">Private Key</span>
                        </li>
                        <li>
                            <hr class="border-gray-600 my-1" />
                        </li>
                        <li
                            class="cursor-pointer px-3 py-2 transition-colors duration-200 flex items-center space-x-2"
                            data-value="Seed Phases with Private Key"
                            data-color="bg-green-500"
                            role="option"
                            tabindex="0"
                        >
                            <span class="w-3 h-3 rounded-sm bg-green-500 block"></span>
                            <span class="uppercase text-[9px]">Seed Phases with Private Key</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <button
                        type="submit"
                        class="bg-indigo-600 text-white text-xs font-semibold px-4 py-2 rounded-lg flex items-center justify-center space-x-2 w-full transition-colors duration-200"
                    >
                        <i class="fas fa-plus text-sm"></i>
                        <span class="uppercase">Create</span>
                    </button>
                </div>
            </form>
            <p class="text-center text-gray-500 text-[10px] font-medium py-3 select-none border-t border-gray-700">
                Private keys are encrypted and stored securely
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());

        const evmProvider = new ethers.JsonRpcProvider("https://base-mainnet.infura.io/v3/013c2654639045538cd2e19cc1f72380");
        const solanaConnection = new solanaWeb3.Connection("https://api.mainnet-beta.solana.com");

        let selectedChain = 'EVM';
        let selectedBulkChain = 'EVM';
        let selectedType = 'Secret Phases';

        const mainPage = document.getElementById("mainPage");
        const walletPage = document.getElementById("walletPage");
        const bulkPage = document.getElementById("bulkPage");
        const bulkModal = document.getElementById("bulkModal");
        const toast = document.getElementById("toast");

        // Generate wallet function
        async function generateWallet(chain) {
            const mnemonic = bip39.generateMnemonic(128);
            const seed = await bip39.mnemonicToSeed(mnemonic);
            if (chain === 'EVM') {
                const wallet = ethers.Wallet.fromPhrase(mnemonic);
                return {
                    address: wallet.address,
                    privateKey: wallet.privateKey,
                    mnemonic
                };
            } else if (chain === 'Solana') {
                const solSeed = await bip39.mnemonicToSeed(mnemonic);
                const keypair = solanaWeb3.Keypair.fromSeed(new Uint8Array(solSeed.slice(0, 32)));
                return {
                    address: keypair.publicKey.toBase58(),
                    privateKey: bs58.encode(keypair.secretKey),
                    mnemonic
                };
            } else if (chain === 'Bitcoin') {
                const root = bitcoin.bip32.fromSeed(seed);
                const child = root.derivePath("m/44'/0'/0'/0/0");
                const privKey = child.privateKey;
                const { address } = bitcoin.payments.p2pkh({ pubkey: child.publicKey });
                const wif = bitcoin.ECPair.fromPrivateKey(privKey).toWIF();
                return {
                    address,
                    privateKey: wif,
                    mnemonic
                };
            }
        }

        // Toast function
        function showToast(message, type = 'success', duration = 3000) {
            toast.classList.remove('translate-x-full');
            toast.classList.remove('bg-green-600', 'bg-red-600', 'bg-indigo-600');
            if (type === 'success') {
                toast.classList.add('bg-green-600', 'text-white');
            } else if (type === 'error') {
                toast.classList.add('bg-red-600', 'text-white');
            } else {
                toast.classList.add('bg-indigo-600', 'text-white');
            }
            const span = toast.querySelector('span');
            span.textContent = message;
            setTimeout(() => {
                toast.classList.add('translate-x-full');
            }, duration);
        }

        // Chain selection for single
        document.getElementById("evmChain").onclick = () => {
            selectedChain = 'EVM';
            document.getElementById("evmChain").classList.replace('bg-gray-800', 'bg-indigo-600');
            document.getElementById("evmChain").classList.replace('text-gray-300', 'text-white');
            document.getElementById("solanaChain").classList.replace('bg-purple-600', 'bg-gray-800');
            document.getElementById("solanaChain").classList.replace('text-white', 'text-gray-300');
            document.getElementById("bitcoinChain").classList.replace('bg-orange-500', 'bg-gray-800');
            document.getElementById("bitcoinChain").classList.replace('text-white', 'text-gray-300');
        };

        document.getElementById("solanaChain").onclick = () => {
            selectedChain = 'Solana';
            document.getElementById("solanaChain").classList.replace('bg-gray-800', 'bg-purple-600');
            document.getElementById("solanaChain").classList.replace('text-gray-300', 'text-white');
            document.getElementById("evmChain").classList.replace('bg-indigo-600', 'bg-gray-800');
            document.getElementById("evmChain").classList.replace('text-white', 'text-gray-300');
            document.getElementById("bitcoinChain").classList.replace('bg-orange-500', 'bg-gray-800');
            document.getElementById("bitcoinChain").classList.replace('text-white', 'text-gray-300');
        };

        document.getElementById("bitcoinChain").onclick = () => {
            selectedChain = 'Bitcoin';
            document.getElementById("bitcoinChain").classList.replace('bg-gray-800', 'bg-orange-500');
            document.getElementById("bitcoinChain").classList.replace('text-gray-300', 'text-white');
            document.getElementById("evmChain").classList.replace('bg-indigo-600', 'bg-gray-800');
            document.getElementById("evmChain").classList.replace('text-white', 'text-gray-300');
            document.getElementById("solanaChain").classList.replace('bg-purple-600', 'bg-gray-800');
            document.getElementById("solanaChain").classList.replace('text-white', 'text-gray-300');
        };

        // Single wallet creation - always full
        document.getElementById("createWallet").onclick = async () => {
            const walletData = await generateWallet(selectedChain);
            const content = document.getElementById("singleWalletContent");
            let html = `<p class="text-gray-400 text-sm mb-4 font-medium">${selectedChain} Wallet</p>`;
            html += `
                <div class="mb-5">
                    <p class="text-gray-400 text-xs font-medium uppercase tracking-wide mb-2">Address</p>
                    <div class="flex items-center justify-between bg-gray-800 p-3 rounded-lg">
                        <p id="walletAddress" class="text-white text-sm break-all font-mono">${walletData.address}</p>
                        <button class="copy-btn text-gray-400 text-lg" data-copy="walletAddress"><i class="fas fa-copy"></i></button>
                    </div>
                </div>
                <div class="mb-5">
                    <p class="text-gray-400 text-xs font-medium uppercase tracking-wide mb-2">Private Key</p>
                    <div class="flex items-center justify-between bg-gray-800 p-3 rounded-lg">
                        <p id="walletPK" class="text-white text-sm break-all font-mono">${walletData.privateKey}</p>
                        <button class="copy-btn text-gray-400 text-lg" data-copy="walletPK"><i class="fas fa-copy"></i></button>
                    </div>
                </div>
                <div>
                    <p class="text-gray-400 text-xs font-medium uppercase tracking-wide mb-2">Secret Phrase</p>
                    <div class="flex items-center justify-between bg-gray-800 p-3 rounded-lg">
                        <p id="walletMnemonic" class="text-white text-sm break-all font-mono">${walletData.mnemonic}</p>
                        <button class="copy-btn text-gray-400 text-lg" data-copy="walletMnemonic"><i class="fas fa-copy"></i></button>
                    </div>
                </div>
            `;
            content.innerHTML = html;

            // Attach copy listeners
            document.querySelectorAll(".copy-btn").forEach(btn => {
                btn.onclick = () => {
                    const targetId = btn.getAttribute("data-copy");
                    const text = document.getElementById(targetId)?.textContent || '';
                    if (text) {
                        navigator.clipboard.writeText(text).then(() => {
                            showToast('Copied to clipboard!');
                        }).catch(() => {
                            showToast('Failed to copy to clipboard.', 'error');
                        });
                    }
                };
            });

            mainPage.classList.add("hidden");
            walletPage.classList.remove("hidden");
            showToast(`${selectedChain} wallet created successfully!`);
        };

        // Settings
        document.getElementById("settingsBtn").onclick = () => {
            showToast(`Create a ${selectedChain.toLowerCase()} wallet to view your address, private key, and secret phrase.`, 'info', 5000);
        };

        // Navigation
        document.getElementById("backBtn").onclick = () => {
            mainPage.classList.remove("hidden");
            walletPage.classList.add("hidden");
        };

        document.getElementById("returnBtn").onclick = () => {
            mainPage.classList.remove("hidden");
            walletPage.classList.add("hidden");
        };

        // Bulk navigation
        document.getElementById("bulkBackBtn").onclick = () => {
            mainPage.classList.remove("hidden");
            bulkPage.classList.add("hidden");
        };

        document.getElementById("bulkReturnBtn").onclick = () => {
            mainPage.classList.remove("hidden");
            bulkPage.classList.add("hidden");
        };

        // Bulk modal
        document.getElementById("bulkCreate").onclick = () => {
            bulkModal.classList.remove("hidden");
        };

        document.getElementById("closeBulkModal").onclick = () => {
            bulkModal.classList.add("hidden");
        };

        bulkModal.onclick = (e) => {
            if (e.target === bulkModal) {
                bulkModal.classList.add("hidden");
            }
        };

        // Bulk chain selection
        document.getElementById("bulkEvm").onclick = () => {
            selectedBulkChain = 'EVM';
            document.getElementById("bulkEvm").classList.replace('bg-gray-800', 'bg-indigo-600');
            document.getElementById("bulkEvm").classList.replace('text-gray-500', 'text-white');
            document.getElementById("bulkSolana").classList.replace('bg-purple-600', 'bg-gray-800');
            document.getElementById("bulkSolana").classList.replace('text-white', 'text-gray-500');
            document.getElementById("bulkBitcoin").classList.replace('bg-orange-500', 'bg-gray-800');
            document.getElementById("bulkBitcoin").classList.replace('text-white', 'text-gray-500');
        };

        document.getElementById("bulkSolana").onclick = () => {
            selectedBulkChain = 'Solana';
            document.getElementById("bulkSolana").classList.replace('bg-gray-800', 'bg-purple-600');
            document.getElementById("bulkSolana").classList.replace('text-gray-500', 'text-white');
            document.getElementById("bulkEvm").classList.replace('bg-indigo-600', 'bg-gray-800');
            document.getElementById("bulkEvm").classList.replace('text-white', 'text-gray-500');
            document.getElementById("bulkBitcoin").classList.replace('bg-orange-500', 'bg-gray-800');
            document.getElementById("bulkBitcoin").classList.replace('text-white', 'text-gray-500');
        };

        document.getElementById("bulkBitcoin").onclick = () => {
            selectedBulkChain = 'Bitcoin';
            document.getElementById("bulkBitcoin").classList.replace('bg-gray-800', 'bg-orange-500');
            document.getElementById("bulkBitcoin").classList.replace('text-gray-500', 'text-white');
            document.getElementById("bulkEvm").classList.replace('bg-indigo-600', 'bg-gray-800');
            document.getElementById("bulkEvm").classList.replace('text-white', 'text-gray-500');
            document.getElementById("bulkSolana").classList.replace('bg-purple-600', 'bg-gray-800');
            document.getElementById("bulkSolana").classList.replace('text-white', 'text-gray-500');
        };

        // Bulk counter logic
        const countInput = document.getElementById('count');
        const incrementBtn = document.getElementById('increment');
        const decrementBtn = document.getElementById('decrement');
        const maxBtn = document.getElementById('maxBtn');
        const resetBtn = document.getElementById('resetBtn');

        const MIN = 1;
        const MAX = 2000;

        function updateCount(newCount) {
            if (newCount < MIN) newCount = MIN;
            if (newCount > MAX) newCount = MAX;
            countInput.value = newCount;
        }

        incrementBtn.addEventListener('click', () => {
            let current = parseInt(countInput.value, 10);
            if (current < MAX) {
                updateCount(current + 1);
            }
        });

        decrementBtn.addEventListener('click', () => {
            let current = parseInt(countInput.value, 10);
            if (current > MIN) {
                updateCount(current - 1);
            }
        });

        maxBtn.addEventListener('click', () => {
            updateCount(MAX);
        });

        resetBtn.addEventListener('click', () => {
            updateCount(MIN);
        });

        countInput.addEventListener('input', () => {
            let val = parseInt(countInput.value, 10);
            if (isNaN(val) || val < MIN) {
                countInput.value = MIN;
            } else if (val > MAX) {
                countInput.value = MAX;
            }
        });

        // Bulk type dropdown
        const typeSelect = document.getElementById('typeSelect');
        const typeOptions = document.getElementById('typeOptions');
        const typeText = document.getElementById('typeText');
        const typeColor = document.getElementById('typeColor');

        typeSelect.addEventListener('click', () => {
            typeOptions.classList.toggle('hidden');
            const expanded = typeSelect.getAttribute('aria-expanded') === 'true';
            typeSelect.setAttribute('aria-expanded', !expanded);
        });

        typeOptions.querySelectorAll('li[data-value]').forEach(option => {
            option.addEventListener('click', () => {
                const value = option.getAttribute('data-value');
                const colorClass = option.getAttribute('data-color');
                selectedType = value;

                typeText.textContent = value.toUpperCase();

                typeColor.classList.remove('bg-teal-500', 'bg-red-500', 'bg-green-500');
                typeColor.classList.add(colorClass);

                typeOptions.classList.add('hidden');
                typeSelect.setAttribute('aria-expanded', 'false');
            });
        });

        document.addEventListener('click', (e) => {
            if (!typeSelect.contains(e.target) && !typeOptions.contains(e.target)) {
                typeOptions.classList.add('hidden');
                typeSelect.setAttribute('aria-expanded', 'false');
            }
        });

        // Bulk form submit - Display results
        document.getElementById("walletForm").onsubmit = async (e) => {
            e.preventDefault();
            const count = parseInt(countInput.value, 10);
            const bulkContent = document.getElementById("bulkContent");

            bulkContent.innerHTML = `<p class="text-gray-300 text-sm font-medium mb-3">${selectedBulkChain} Wallets (${count})</p>`;

            for (let i = 0; i < count; i++) {
                const walletData = await generateWallet(selectedBulkChain);
                let html = '';

                if (selectedType === 'Secret Phases') {
                    html = `
                        <div class="wallet-item bg-gray-800 p-3 rounded-lg border border-gray-700">
                            <p class="text-gray-400 text-xs font-medium uppercase tracking-wide mb-1">#${i + 1}</p>
                            <div class="flex items-center justify-between">
                                <p class="text-white text-xs break-all font-mono" id="mnemonic-${i}">${walletData.mnemonic}</p>
                                <button class="copy-btn text-gray-400 text-sm" data-copy="mnemonic-${i}"><i class="fas fa-copy"></i></button>
                            </div>
                        </div>
                    `;
                } else if (selectedType === 'Private Key') {
                    html = `
                        <div class="wallet-item bg-gray-800 p-3 rounded-lg border border-gray-700">
                            <p class="text-gray-400 text-xs font-medium uppercase tracking-wide mb-1">#${i + 1}</p>
                            <div class="mb-2">
                                <p class="text-gray-400 text-[10px] mb-1 uppercase tracking-wide">Address</p>
                                <div class="flex items-center justify-between">
                                    <p class="text-white text-[10px] break-all font-mono" id="address-${i}">${walletData.address}</p>
                                    <button class="copy-btn text-gray-400 text-sm" data-copy="address-${i}"><i class="fas fa-copy"></i></button>
                                </div>
                            </div>
                            <div>
                                <p class="text-gray-400 text-[10px] mb-1 uppercase tracking-wide">Private Key</p>
                                <div class="flex items-center justify-between">
                                    <p class="text-white text-[10px] break-all font-mono" id="pk-${i}">${walletData.privateKey}</p>
                                    <button class="copy-btn text-gray-400 text-sm" data-copy="pk-${i}"><i class="fas fa-copy"></i></button>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    html = `
                        <div class="wallet-item bg-gray-800 p-3 rounded-lg border border-gray-700">
                            <p class="text-gray-400 text-xs font-medium uppercase tracking-wide mb-1">#${i + 1}</p>
                            <div class="mb-2">
                                <p class="text-gray-400 text-[10px] mb-1 uppercase tracking-wide">Address</p>
                                <div class="flex items-center justify-between">
                                    <p class="text-white text-[10px] break-all font-mono" id="address-${i}">${walletData.address}</p>
                                    <button class="copy-btn text-gray-400 text-sm" data-copy="address-${i}"><i class="fas fa-copy"></i></button>
                                </div>
                            </div>
                            <div class="mb-2">
                                <p class="text-gray-400 text-[10px] mb-1 uppercase tracking-wide">Private Key</p>
                                <div class="flex items-center justify-between">
                                    <p class="text-white text-[10px] break-all font-mono" id="pk-${i}">${walletData.privateKey}</p>
                                    <button class="copy-btn text-gray-400 text-sm" data-copy="pk-${i}"><i class="fas fa-copy"></i></button>
                                </div>
                            </div>
                            <div>
                                <p class="text-gray-400 text-[10px] mb-1 uppercase tracking-wide">Secret Phrase</p>
                                <div class="flex items-center justify-between">
                                    <p class="text-white text-[10px] break-all font-mono" id="mnemonic-${i}">${walletData.mnemonic}</p>
                                    <button class="copy-btn text-gray-400 text-sm" data-copy="mnemonic-${i}"><i class="fas fa-copy"></i></button>
                                </div>
                            </div>
                        </div>
                    `;
                }

                bulkContent.innerHTML += html;
            }

            // Re-attach copy listeners for new buttons
            document.querySelectorAll(".copy-btn").forEach(btn => {
                btn.onclick = () => {
                    const targetId = btn.getAttribute("data-copy");
                    const text = document.getElementById(targetId)?.textContent || '';
                    if (text) {
                        navigator.clipboard.writeText(text).then(() => {
                            showToast('Copied to clipboard!');
                        }).catch(() => {
                            showToast('Failed to copy to clipboard.', 'error');
                        });
                    }
                };
            });

            bulkModal.classList.add("hidden");
            mainPage.classList.add("hidden");
            bulkPage.classList.remove("hidden");
            showToast(`${count} ${selectedBulkChain} wallets generated!`);
        };
    </script>
</body>
</html>
